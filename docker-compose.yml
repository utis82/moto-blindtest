services:
  api:
    build:
      context: .
      target: backend
    environment:
      PORT: ${PORT:-4000}
      DATABASE_URL: "${DATABASE_URL:-file:../db/dev.db}"
    volumes:
      - ./app/db:/app/db
    ports:
      - "${PORT:-4000}:4000"

  web:
    build:
      context: .
      target: frontend
      args:
        VITE_API_BASE: "${VITE_API_BASE:-http://localhost:4000}"
    depends_on:
      - api
    ports:
      - "5173:80"
